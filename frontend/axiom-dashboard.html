<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ATLAS AXIOM DASHBOARD - GCP Management</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            /* Primitive Color Tokens */
            --color-white: rgba(255, 255, 255, 1);
            --color-black: rgba(0, 0, 0, 1);
            --color-cream-50: rgba(252, 252, 249, 1);
            --color-cream-100: rgba(255, 255, 253, 1);
            --color-gray-200: rgba(245, 245, 245, 1);
            --color-gray-300: rgba(167, 169, 169, 1);
            --color-gray-400: rgba(119, 124, 124, 1);
            --color-slate-500: rgba(98, 108, 113, 1);
            --color-brown-600: rgba(94, 82, 64, 1);
            --color-charcoal-700: rgba(31, 33, 33, 1);
            --color-charcoal-800: rgba(38, 40, 40, 1);
            --color-slate-900: rgba(19, 52, 59, 1);
            --color-teal-300: rgba(50, 184, 198, 1);
            --color-teal-400: rgba(45, 166, 178, 1);
            --color-teal-500: rgba(33, 128, 141, 1);
            --color-teal-600: rgba(29, 116, 128, 1);
            --color-teal-700: rgba(26, 104, 115, 1);
            --color-teal-800: rgba(41, 150, 161, 1);
            --color-red-400: rgba(255, 84, 89, 1);
            --color-red-500: rgba(192, 21, 47, 1);
            --color-orange-400: rgba(230, 129, 97, 1);
            --color-orange-500: rgba(168, 75, 47, 1);
            
            /* RGB versions for opacity control */
            --color-brown-600-rgb: 94, 82, 64;
            --color-teal-500-rgb: 33, 128, 141;
            --color-slate-900-rgb: 19, 52, 59;
            --color-slate-500-rgb: 98, 108, 113;
            --color-red-500-rgb: 192, 21, 47;
            --color-red-400-rgb: 255, 84, 89;
            --color-orange-500-rgb: 168, 75, 47;
            --color-orange-400-rgb: 230, 129, 97;
            
            /* Dark mode colors */
            --color-gray-400-rgb: 119, 124, 124;
            --color-teal-300-rgb: 50, 184, 198;
            --color-gray-300-rgb: 167, 169, 169;
            --color-gray-200-rgb: 245, 245, 245;
            
            /* Background color tokens (Dark Mode) */
            --color-bg-1: rgba(29, 78, 216, 0.15);
            --color-bg-2: rgba(180, 83, 9, 0.15);
            --color-bg-3: rgba(21, 128, 61, 0.15);
            --color-bg-4: rgba(185, 28, 28, 0.15);
            --color-bg-5: rgba(107, 33, 168, 0.15);
            --color-bg-6: rgba(194, 65, 12, 0.15);
            --color-bg-7: rgba(190, 24, 93, 0.15);
            --color-bg-8: rgba(8, 145, 178, 0.15);
            
            /* Semantic Color Tokens (Dark Mode) */
            --color-background: var(--color-charcoal-700);
            --color-surface: var(--color-charcoal-800);
            --color-text: var(--color-gray-200);
            --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
            --color-primary: var(--color-teal-300);
            --color-primary-hover: var(--color-teal-400);
            --color-primary-active: var(--color-teal-800);
            --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
            --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
            --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
            --color-border: rgba(var(--color-gray-400-rgb), 0.3);
            --color-error: var(--color-red-400);
            --color-success: var(--color-teal-300);
            --color-warning: var(--color-orange-400);
            --color-info: var(--color-gray-300);
            --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
            --color-btn-primary-text: var(--color-slate-900);
            --color-card-border: rgba(var(--color-gray-400-rgb), 0.2);
            --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
            
            /* Typography */
            --font-family-base: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            --font-family-mono: "JetBrains Mono", "Fira Code", "Consolas", monospace;
            --font-size-xs: 11px;
            --font-size-sm: 12px;
            --font-size-base: 14px;
            --font-size-md: 14px;
            --font-size-lg: 16px;
            --font-size-xl: 18px;
            --font-size-2xl: 20px;
            --font-size-3xl: 24px;
            --font-size-4xl: 30px;
            --font-weight-normal: 400;
            --font-weight-medium: 500;
            --font-weight-semibold: 550;
            --font-weight-bold: 600;
            
            /* Spacing */
            --space-0: 0;
            --space-1: 1px;
            --space-2: 2px;
            --space-4: 4px;
            --space-6: 6px;
            --space-8: 8px;
            --space-12: 12px;
            --space-16: 16px;
            --space-20: 20px;
            --space-24: 24px;
            --space-32: 32px;
            
            /* Border Radius */
            --radius-sm: 6px;
            --radius-base: 8px;
            --radius-md: 10px;
            --radius-lg: 12px;
            --radius-full: 9999px;
            
            /* Shadows */
            --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.1);
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.15), 0 2px 4px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.15), 0 4px 6px -2px rgba(0, 0, 0, 0.1);
            
            /* Dashboard-specific colors */
            --dashboard-bg: #1a1a1a;
            --dashboard-surface: #2d2d2d;
            --dashboard-accent: #00d9ff;
            --dashboard-success: #00ff88;
            --dashboard-warning: #ffaa00;
            --dashboard-danger: #ff4444;
            --dashboard-text: #e0e0e0;
            --dashboard-text-muted: #999;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: var(--font-family-base);
            background-color: var(--dashboard-bg);
            color: var(--dashboard-text);
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .header {
            background: linear-gradient(135deg, var(--dashboard-surface), rgba(0, 217, 255, 0.1));
            padding: var(--space-16) var(--space-24);
            border-bottom: 1px solid var(--color-border);
            backdrop-filter: blur(10px);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: var(--space-12);
            font-size: var(--font-size-2xl);
            font-weight: var(--font-weight-bold);
            color: var(--dashboard-accent);
        }
        
        .header-controls {
            display: flex;
            align-items: center;
            gap: var(--space-16);
        }
        
        .controller-switcher {
            display: flex;
            align-items: center;
            gap: var(--space-8);
        }
        
        .controller-switcher select {
            background: var(--dashboard-surface);
            color: var(--dashboard-text);
            border: 1px solid var(--color-border);
            padding: var(--space-8) var(--space-12);
            border-radius: var(--radius-base);
            font-size: var(--font-size-sm);
            min-width: 200px;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            gap: var(--space-8);
            padding: var(--space-8) var(--space-16);
            background: var(--dashboard-accent);
            color: var(--color-black);
            border: none;
            border-radius: var(--radius-base);
            font-size: var(--font-size-sm);
            font-weight: var(--font-weight-medium);
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .btn-secondary {
            background: var(--color-secondary);
            color: var(--dashboard-text);
        }
        
        .btn-danger {
            background: var(--dashboard-danger);
            color: white;
        }
        
        .btn-success {
            background: var(--dashboard-success);
            color: var(--color-black);
        }
        
        .nav-tabs {
            background: var(--dashboard-surface);
            padding: 0 var(--space-24);
            border-bottom: 1px solid var(--color-border);
            overflow-x: auto;
        }
        
        .nav-tabs ul {
            display: flex;
            list-style: none;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .nav-tabs li {
            position: relative;
        }
        
        .nav-tabs a {
            display: flex;
            align-items: center;
            gap: var(--space-8);
            padding: var(--space-16) var(--space-20);
            color: var(--dashboard-text-muted);
            text-decoration: none;
            border-bottom: 3px solid transparent;
            transition: all 0.2s ease;
            white-space: nowrap;
        }
        
        .nav-tabs a:hover,
        .nav-tabs a.active {
            color: var(--dashboard-accent);
            border-bottom-color: var(--dashboard-accent);
        }
        
        .main-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--space-24);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .card {
            background: var(--dashboard-surface);
            border: 1px solid var(--color-card-border);
            border-radius: var(--radius-lg);
            padding: var(--space-24);
            margin-bottom: var(--space-24);
            box-shadow: var(--shadow-sm);
            backdrop-filter: blur(10px);
        }
        
        .card h2, .card h3 {
            margin-bottom: var(--space-16);
            color: var(--dashboard-accent);
            display: flex;
            align-items: center;
            gap: var(--space-8);
        }
        
        .grid {
            display: grid;
            gap: var(--space-24);
        }
        
        .grid-2 {
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }
        
        .grid-3 {
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-16);
            margin-bottom: var(--space-24);
        }
        
        .stat-card {
            background: linear-gradient(135deg, var(--dashboard-surface), rgba(0, 217, 255, 0.05));
            border: 1px solid var(--color-card-border);
            border-radius: var(--radius-lg);
            padding: var(--space-20);
            text-align: center;
        }
        
        .stat-card .value {
            font-size: var(--font-size-3xl);
            font-weight: var(--font-weight-bold);
            color: var(--dashboard-accent);
            margin-bottom: var(--space-8);
        }
        
        .stat-card .label {
            color: var(--dashboard-text-muted);
            font-size: var(--font-size-sm);
        }
        
        .form-group {
            margin-bottom: var(--space-16);
        }
        
        .form-group label {
            display: block;
            margin-bottom: var(--space-8);
            font-weight: var(--font-weight-medium);
            color: var(--dashboard-text);
        }
        
        .form-control {
            width: 100%;
            padding: var(--space-12);
            background: var(--dashboard-bg);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-base);
            color: var(--dashboard-text);
            font-size: var(--font-size-base);
            transition: border-color 0.2s ease;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--dashboard-accent);
            box-shadow: 0 0 0 2px rgba(0, 217, 255, 0.2);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-16);
        }
        
        .slider-group {
            margin-bottom: var(--space-16);
        }
        
        .slider-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-8);
        }
        
        .slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: var(--color-border);
            outline: none;
            -webkit-appearance: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--dashboard-accent);
            cursor: pointer;
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: var(--space-8);
            margin-bottom: var(--space-16);
        }
        
        .checkbox-group input[type="checkbox"] {
            width: 16px;
            height: 16px;
            accent-color: var(--dashboard-accent);
        }
        
        .table {
            width: 100%;
            border-collapse: collapse;
            background: var(--dashboard-surface);
            border-radius: var(--radius-lg);
            overflow: hidden;
        }
        
        .table th,
        .table td {
            padding: var(--space-12) var(--space-16);
            text-align: left;
            border-bottom: 1px solid var(--color-border);
        }
        
        .table th {
            background: var(--dashboard-bg);
            font-weight: var(--font-weight-semibold);
            color: var(--dashboard-accent);
        }
        
        .table tbody tr:hover {
            background: rgba(0, 217, 255, 0.05);
        }
        
        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: var(--space-4);
            padding: var(--space-4) var(--space-8);
            border-radius: var(--radius-full);
            font-size: var(--font-size-xs);
            font-weight: var(--font-weight-medium);
        }
        
        .status-badge.online {
            background: rgba(0, 255, 136, 0.2);
            color: var(--dashboard-success);
        }
        
        .status-badge.offline {
            background: rgba(255, 68, 68, 0.2);
            color: var(--dashboard-danger);
        }
        
        .status-badge.deploying {
            background: rgba(255, 170, 0, 0.2);
            color: var(--dashboard-warning);
        }
        
        .status-badge.running {
            background: rgba(0, 255, 136, 0.2);
            color: var(--dashboard-success);
        }
        
        .terminal {
            background: #0c0c0c;
            border: 1px solid var(--color-border);
            border-radius: var(--radius-lg);
            padding: var(--space-16);
            font-family: var(--font-family-mono);
            font-size: var(--font-size-sm);
            color: #00ff00;
            height: 400px;
            overflow-y: auto;
            position: relative;
        }
        
        .terminal-header {
            color: var(--dashboard-accent);
            margin-bottom: var(--space-8);
            padding-bottom: var(--space-8);
            border-bottom: 1px solid var(--color-border);
        }
        
        .terminal-content {
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        .terminal-input {
            display: flex;
            align-items: center;
            margin-top: var(--space-8);
        }
        
        .terminal-prompt {
            color: var(--dashboard-accent);
            margin-right: var(--space-8);
        }
        
        .terminal-input input {
            flex: 1;
            background: transparent;
            border: none;
            color: #00ff00;
            font-family: var(--font-family-mono);
            font-size: var(--font-size-sm);
            outline: none;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--color-border);
            border-radius: 4px;
            overflow: hidden;
            margin: var(--space-8) 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--dashboard-accent), var(--dashboard-success));
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        
        .world-map {
            width: 100%;
            height: 400px;
            background: var(--dashboard-bg);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-lg);
            position: relative;
            overflow: hidden;
        }
        
        .map-marker {
            position: absolute;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: 2px solid white;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        
        .map-marker:hover {
            transform: scale(1.5);
        }
        
        .map-marker.active {
            background: var(--dashboard-success);
            box-shadow: 0 0 10px var(--dashboard-success);
        }
        
        .map-marker.available {
            background: var(--dashboard-accent);
        }
        
        .map-marker.inactive {
            background: var(--dashboard-text-muted);
        }
        
        .tooltip {
            position: absolute;
            background: var(--dashboard-surface);
            color: var(--dashboard-text);
            padding: var(--space-8);
            border-radius: var(--radius-base);
            font-size: var(--font-size-xs);
            border: 1px solid var(--color-border);
            z-index: 1000;
            display: none;
        }
        
        .cost-breakdown {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: var(--space-24);
            align-items: start;
        }
        
        .cost-chart {
            height: 200px;
            background: var(--dashboard-bg);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--dashboard-text-muted);
        }
        
        .cost-summary {
            background: var(--dashboard-bg);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-lg);
            padding: var(--space-16);
        }
        
        .cost-item {
            display: flex;
            justify-content: space-between;
            padding: var(--space-8) 0;
            border-bottom: 1px solid var(--color-border);
        }
        
        .cost-item:last-child {
            border-bottom: none;
            font-weight: var(--font-weight-semibold);
            color: var(--dashboard-accent);
        }
        
        .file-upload {
            border: 2px dashed var(--color-border);
            border-radius: var(--radius-lg);
            padding: var(--space-24);
            text-align: center;
            transition: border-color 0.2s ease;
        }
        
        .file-upload:hover {
            border-color: var(--dashboard-accent);
        }
        
        .file-upload input[type="file"] {
            display: none;
        }
        
        .file-list {
            margin-top: var(--space-16);
        }
        
        .file-item {
            display: flex;
            justify-content: between;
            align-items: center;
            padding: var(--space-12);
            background: var(--dashboard-bg);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-base);
            margin-bottom: var(--space-8);
        }
        
        .file-item .file-info {
            flex: 1;
        }
        
        .file-item .file-name {
            font-weight: var(--font-weight-medium);
            margin-bottom: var(--space-4);
        }
        
        .file-item .file-meta {
            font-size: var(--font-size-xs);
            color: var(--dashboard-text-muted);
        }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: var(--dashboard-surface);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-lg);
            padding: var(--space-24);
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-16);
            padding-bottom: var(--space-16);
            border-bottom: 1px solid var(--color-border);
        }
        
        .modal-header h3 {
            margin: 0;
            color: var(--dashboard-accent);
        }
        
        .modal-close {
            background: none;
            border: none;
            color: var(--dashboard-text-muted);
            font-size: var(--font-size-xl);
            cursor: pointer;
            padding: var(--space-4);
        }
        
        .notification {
            position: fixed;
            top: var(--space-20);
            right: var(--space-20);
            background: var(--dashboard-surface);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-lg);
            padding: var(--space-16);
            min-width: 300px;
            z-index: 1001;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.success {
            border-left: 4px solid var(--dashboard-success);
        }
        
        .notification.error {
            border-left: 4px solid var(--dashboard-danger);
        }
        
        .notification.warning {
            border-left: 4px solid var(--dashboard-warning);
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: var(--space-16);
            }
            
            .nav-tabs {
                padding: 0;
            }
            
            .main-content {
                padding: var(--space-16);
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .cost-breakdown {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-satellite-dish"></i>
                ATLAS AXIOM DASHBOARD
            </div>
            <div class="header-controls">
                <div class="controller-switcher">
                    <label for="controller-select">Controller:</label>
                    <select id="controller-select">
                        <option value="1">axiom-gcp-primary (europe-west1) âœ“</option>
                    </select>
                </div>
                <button class="btn" onclick="openModal('add-controller-modal')">
                    <i class="fas fa-plus"></i> Add Controller
                </button>
            </div>
        </div>
    </header>
    
    <nav class="nav-tabs">
        <ul>
            <li><a href="#overview" class="nav-link active" onclick="switchTab('overview', this)"><i class="fas fa-chart-line"></i> Overview</a></li>
            <li><a href="#controllers" class="nav-link" onclick="switchTab('controllers', this)"><i class="fas fa-server"></i> Controllers</a></li>
            <li><a href="#fleet-deployer" class="nav-link" onclick="switchTab('fleet-deployer', this)"><i class="fas fa-rocket"></i> Fleet Deployer</a></li>
            <li><a href="#instances" class="nav-link" onclick="switchTab('instances', this)"><i class="fas fa-cloud"></i> Instances</a></li>
            <li><a href="#scan-manager" class="nav-link" onclick="switchTab('scan-manager', this)"><i class="fas fa-search"></i> Scan Manager</a></li>
            <li><a href="#terminal" class="nav-link" onclick="switchTab('terminal', this)"><i class="fas fa-terminal"></i> Terminal</a></li>
            <li><a href="#files" class="nav-link" onclick="switchTab('files', this)"><i class="fas fa-folder"></i> Files</a></li>
        </ul>
    </nav>
    
    <main class="main-content">
        <!-- Overview Tab -->
        <div id="overview" class="tab-content active">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="value" id="active-controllers-count">1</div>
                    <div class="label">Active Controllers</div>
                </div>
                <div class="stat-card">
                    <div class="value" id="running-instances-count">0</div>
                    <div class="label">Running Instances</div>
                </div>
                <div class="stat-card">
                    <div class="value" id="active-scans-count">0</div>
                    <div class="label">Active Scans</div>
                </div>
                <div class="stat-card">
                    <div class="value" id="monthly-cost">$0.00</div>
                    <div class="label">Est. Monthly Cost</div>
                </div>
            </div>
            
            <div class="grid grid-2">
                <div class="card">
                    <h3><i class="fas fa-globe"></i> GCP Regions</h3>
                    <div class="world-map" id="world-map">
                        <div class="tooltip" id="map-tooltip"></div>
                    </div>
                </div>
                
                <div class="card">
                    <h3><i class="fas fa-chart-pie"></i> Cost Breakdown</h3>
                    <div class="cost-breakdown">
                        <div class="cost-chart">
                            <i class="fas fa-chart-pie fa-3x" style="opacity: 0.3;"></i>
                        </div>
                        <div class="cost-summary" id="cost-summary">
                            <div class="cost-item">
                                <span>Compute</span>
                                <span>$0.00</span>
                            </div>
                            <div class="cost-item">
                                <span>Storage</span>
                                <span>$0.00</span>
                            </div>
                            <div class="cost-item">
                                <span>Network</span>
                                <span>$0.00</span>
                            </div>
                            <div class="cost-item">
                                <span>Total</span>
                                <span>$0.00</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h3><i class="fas fa-activity"></i> Recent Activity</h3>
                <div id="activity-log">
                    <p style="color: var(--dashboard-text-muted);">No recent activity</p>
                </div>
            </div>
        </div>
        
        <!-- Controllers Tab -->
        <div id="controllers" class="tab-content">
            <div class="card">
                <h2><i class="fas fa-server"></i> Axiom Controllers</h2>
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Host</th>
                                <th>Region</th>
                                <th>Provider</th>
                                <th>Status</th>
                                <th>Last Seen</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="controllers-table">
                            <!-- Controllers will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- Fleet Deployer Tab -->
        <div id="fleet-deployer" class="tab-content">
            <div class="card">
                <h2><i class="fas fa-rocket"></i> Deploy GCP Fleet</h2>
                <form id="fleet-deploy-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="fleet-name">Fleet Name</label>
                            <input type="text" id="fleet-name" class="form-control" placeholder="scanner-fleet" required>
                        </div>
                        <div class="form-group">
                            <label for="instance-type">Instance Type</label>
                            <select id="instance-type" class="form-control">
                                <option value="e2-micro">e2-micro (0.25 vCPU, 1GB) - $6.13/month</option>
                                <option value="e2-small" selected>e2-small (0.5 vCPU, 2GB) - $12.26/month</option>
                                <option value="e2-medium">e2-medium (1 vCPU, 4GB) - $24.45/month</option>
                                <option value="e2-standard-2">e2-standard-2 (2 vCPU, 8GB) - $48.91/month</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="slider-group">
                        <div class="slider-label">
                            <label>Instance Count</label>
                            <span id="instance-count-value">5</span>
                        </div>
                        <input type="range" id="instance-count" class="slider" min="1" max="50" value="5">
                    </div>
                    
                    <div class="form-group">
                        <label>Regions (hold Ctrl to select multiple)</label>
                        <select id="regions-select" class="form-control" multiple size="6">
                            <option value="europe-west1" selected>Belgium (europe-west1)</option>
                            <option value="europe-west2">London (europe-west2)</option>
                            <option value="europe-west3">Frankfurt (europe-west3)</option>
                            <option value="us-central1">Iowa, USA (us-central1)</option>
                            <option value="us-east1">South Carolina, USA (us-east1)</option>
                            <option value="asia-southeast1">Singapore (asia-southeast1)</option>
                        </select>
                    </div>
                    
                    <div class="checkbox-group">
                        <input type="checkbox" id="preemptible" checked>
                        <label for="preemptible">Use Preemptible VMs (70% cheaper)</label>
                    </div>
                    
                    <div class="card" style="background: var(--color-bg-3); margin-bottom: var(--space-16);">
                        <h4>Cost Estimate</h4>
                        <div style="font-size: var(--font-size-2xl); color: var(--dashboard-success); font-weight: bold;">
                            <span id="cost-estimate">$18.39</span>/month
                        </div>
                        <div style="font-size: var(--font-size-sm); color: var(--dashboard-text-muted); margin-top: var(--space-8);">
                            <span id="savings-info">Saving $42.91 with preemptible VMs</span>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-success">
                        <i class="fas fa-rocket"></i> Deploy Fleet
                    </button>
                </form>
            </div>
            
            <div class="card">
                <h3><i class="fas fa-list"></i> Active Deployments</h3>
                <div id="deployments-list">
                    <p style="color: var(--dashboard-text-muted);">No active deployments</p>
                </div>
            </div>
        </div>
        
        <!-- Instances Tab -->
        <div id="instances" class="tab-content">
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-16);">
                    <h2><i class="fas fa-cloud"></i> Running Instances</h2>
                    <button class="btn btn-secondary" onclick="refreshInstances()">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                </div>
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th><input type="checkbox" id="select-all-instances"></th>
                                <th>Name</th>
                                <th>External IP</th>
                                <th>Internal IP</th>
                                <th>Region</th>
                                <th>Type</th>
                                <th>Status</th>
                                <th>Uptime</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="instances-table">
                            <!-- Instances will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- Scan Manager Tab -->
        <div id="scan-manager" class="tab-content">
            <div class="grid grid-2">
                <div class="card">
                    <h2><i class="fas fa-search"></i> Configure Scan</h2>
                    <form id="scan-config-form">
                        <div class="form-group">
                            <label for="scan-module">Scan Module</label>
                            <select id="scan-module" class="form-control">
                                <option value="nuclei">Nuclei - Fast vulnerability scanner</option>
                                <option value="httpx">HTTPx - HTTP toolkit</option>
                                <option value="nmap">Nmap - Network scanner</option>
                                <option value="masscan">Masscan - TCP port scanner</option>
                                <option value="subfinder">Subfinder - Subdomain discovery</option>
                                <option value="dnsx">DNSx - DNS toolkit</option>
                                <option value="gowitness">Gowitness - Web screenshots</option>
                                <option value="ffuf">FFuF - Web fuzzer</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="scan-targets">Targets (one per line or CIDR)</label>
                            <textarea id="scan-targets" class="form-control" rows="10" placeholder="example.com\n192.168.1.0/24\nsubdomain.example.com"></textarea>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="scan-fleet">Target Fleet</label>
                                <select id="scan-fleet" class="form-control">
                                    <option value="">No fleets available</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="output-file">Output File</label>
                                <input type="text" id="output-file" class="form-control" value="scan-results.txt">
                            </div>
                        </div>
                        
                        <div class="slider-group">
                            <div class="slider-label">
                                <label>Rate Limit (req/s)</label>
                                <span id="rate-limit-value">150</span>
                            </div>
                            <input type="range" id="rate-limit" class="slider" min="10" max="500" value="150">
                        </div>
                        
                        <button type="submit" class="btn btn-success">
                            <i class="fas fa-play"></i> Start Distributed Scan
                        </button>
                    </form>
                </div>
                
                <div class="card">
                    <h3><i class="fas fa-tasks"></i> Active Scans</h3>
                    <div id="active-scans">
                        <p style="color: var(--dashboard-text-muted);">No active scans</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Terminal Tab -->
        <div id="terminal" class="tab-content">
            <div class="card">
                <h2><i class="fas fa-terminal"></i> Axiom Terminal</h2>
                <div class="terminal">
                    <div class="terminal-header">
                        Connected to: axiom-gcp-primary (34.88.216.157)
                        <span style="float: right;">Status: <span style="color: var(--dashboard-success);">Connected</span></span>
                    </div>
                    <div class="terminal-content" id="terminal-output">
Welcome to Axiom Controller Terminal
ubuntu@axiom-controller:~$ 
                    </div>
                    <div class="terminal-input">
                        <span class="terminal-prompt">ubuntu@axiom-controller:~$</span>
                        <input type="text" id="terminal-input" placeholder="Type axiom commands here...">
                    </div>
                </div>
                <div style="margin-top: var(--space-16);">
                    <h4>Quick Commands:</h4>
                    <div style="display: flex; gap: var(--space-8); flex-wrap: wrap; margin-top: var(--space-8);">
                        <button class="btn btn-secondary" onclick="executeQuickCommand('axiom-ls')">axiom-ls</button>
                        <button class="btn btn-secondary" onclick="executeQuickCommand('axiom-fleet --help')">axiom-fleet --help</button>
                        <button class="btn btn-secondary" onclick="executeQuickCommand('axiom-scan --help')">axiom-scan --help</button>
                        <button class="btn btn-secondary" onclick="executeQuickCommand('ps aux | grep axiom')">ps aux | grep axiom</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Files Tab -->
        <div id="files" class="tab-content">
            <div class="grid grid-2">
                <div class="card">
                    <h2><i class="fas fa-upload"></i> File Upload</h2>
                    <div class="file-upload" onclick="document.getElementById('file-input').click()">
                        <i class="fas fa-cloud-upload-alt fa-3x" style="color: var(--dashboard-accent); margin-bottom: var(--space-16);"></i>
                        <h3>Upload Files to Fleet</h3>
                        <p>Click to upload wordlists, target files, or scripts</p>
                        <input type="file" id="file-input" multiple accept=".txt,.lst,.json,.xml">
                    </div>
                    
                    <div style="margin-top: var(--space-16);">
                        <div class="checkbox-group">
                            <input type="checkbox" id="split-file">
                            <label for="split-file">Split file across fleet instances</label>
                        </div>
                        
                        <div class="form-group">
                            <label for="target-fleet">Target Fleet</label>
                            <select id="target-fleet" class="form-control">
                                <option value="">Select fleet...</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3><i class="fas fa-download"></i> Download Results</h3>
                    <div id="download-files">
                        <p style="color: var(--dashboard-text-muted);">No scan results available</p>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h3><i class="fas fa-folder"></i> Uploaded Files</h3>
                <div class="file-list" id="uploaded-files">
                    <p style="color: var(--dashboard-text-muted);">No files uploaded</p>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Add Controller Modal -->
    <div id="add-controller-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Controller</h3>
                <button class="modal-close" onclick="closeModal('add-controller-modal')">&times;</button>
            </div>
            <form id="add-controller-form">
                <div class="form-group">
                    <label for="controller-name">Name</label>
                    <input type="text" id="controller-name" class="form-control" placeholder="axiom-controller-2" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="controller-host">Host/IP</label>
                        <input type="text" id="controller-host" class="form-control" placeholder="35.123.456.789" required>
                    </div>
                    <div class="form-group">
                        <label for="controller-internal-ip">Internal IP</label>
                        <input type="text" id="controller-internal-ip" class="form-control" placeholder="10.132.0.5">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="controller-user">SSH User</label>
                        <input type="text" id="controller-user" class="form-control" value="ubuntu">
                    </div>
                    <div class="form-group">
                        <label for="controller-region">Region</label>
                        <select id="controller-region" class="form-control">
                            <option value="europe-west1">Belgium (europe-west1)</option>
                            <option value="us-central1">Iowa, USA (us-central1)</option>
                            <option value="asia-southeast1">Singapore (asia-southeast1)</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="controller-key-path">SSH Key Path</label>
                    <input type="text" id="controller-key-path" class="form-control" placeholder="/keys/axiom_gcp_key" required>
                </div>
                <div style="display: flex; gap: var(--space-8); justify-content: end; margin-top: var(--space-16);">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('add-controller-modal')">Cancel</button>
                    <button type="submit" class="btn btn-success">Add Controller</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Notification -->
    <div id="notification" class="notification">
        <div id="notification-content"></div>
    </div>
    
    <script>
        // Global data structures
        let controllers = [
            {
                id: 1,
                name: "axiom-gcp-primary",
                host: "34.88.216.157",
                internal_ip: "10.132.0.5",
                ssh_user: "ubuntu",
                ssh_key_path: "/keys/axiom_gcp_key",
                region: "europe-west1",
                provider: "gcp",
                is_active: true,
                last_seen: new Date(),
                created_at: new Date()
            }
        ];
        
        let deployments = [];
        let instances = [];
        let scans = [];
        let uploadedFiles = [];
        
        // GCP data
        const gcpRegions = [
            {id: "europe-west1", name: "Belgium", lat: 50.85, lon: 4.35},
            {id: "europe-west2", name: "London", lat: 51.51, lon: -0.13},
            {id: "europe-west3", name: "Frankfurt", lat: 50.11, lon: 8.68},
            {id: "europe-west4", name: "Netherlands", lat: 52.37, lon: 4.89},
            {id: "europe-north1", name: "Finland", lat: 60.17, lon: 24.94},
            {id: "us-central1", name: "Iowa, USA", lat: 41.26, lon: -95.86},
            {id: "us-east1", name: "South Carolina, USA", lat: 33.84, lon: -78.66},
            {id: "us-east4", name: "Virginia, USA", lat: 37.43, lon: -78.66},
            {id: "us-west1", name: "Oregon, USA", lat: 45.52, lon: -122.68},
            {id: "us-west2", name: "Los Angeles, USA", lat: 34.05, lon: -118.24},
            {id: "asia-southeast1", name: "Singapore", lat: 1.35, lon: 103.82},
            {id: "asia-northeast1", name: "Tokyo, Japan", lat: 35.68, lon: 139.69},
            {id: "asia-south1", name: "Mumbai, India", lat: 19.08, lon: 72.88}
        ];
        
        const instanceTypes = [
            {id: "e2-micro", name: "e2-micro (0.25 vCPU, 1GB)", vcpu: 0.25, ram: 1, cost_hourly: 0.0084, cost_monthly: 6.13, preemptible_cost: 0.0025},
            {id: "e2-small", name: "e2-small (0.5 vCPU, 2GB)", vcpu: 0.5, ram: 2, cost_hourly: 0.0168, cost_monthly: 12.26, preemptible_cost: 0.0050},
            {id: "e2-medium", name: "e2-medium (1 vCPU, 4GB)", vcpu: 1, ram: 4, cost_hourly: 0.0335, cost_monthly: 24.45, preemptible_cost: 0.0101},
            {id: "e2-standard-2", name: "e2-standard-2 (2 vCPU, 8GB)", vcpu: 2, ram: 8, cost_hourly: 0.0670, cost_monthly: 48.91, preemptible_cost: 0.0201}
        ];
        
        // Utility functions
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const content = document.getElementById('notification-content');
            
            content.textContent = message;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }
        
        function switchTab(tabName, element) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(tab => tab.classList.remove('active'));
            
            // Remove active class from all nav links
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => link.classList.remove('active'));
            
            // Show selected tab and mark nav link as active
            document.getElementById(tabName).classList.add('active');
            element.classList.add('active');
        }
        
        // Cost calculation
        function calculateFleetCost() {
            const instanceType = document.getElementById('instance-type').value;
            const instanceCount = parseInt(document.getElementById('instance-count').value);
            const preemptible = document.getElementById('preemptible').checked;
            
            const type = instanceTypes.find(t => t.id === instanceType);
            const hourlyCost = preemptible ? type.preemptible_cost : type.cost_hourly;
            const monthlyCost = hourlyCost * instanceCount * 730;
            const regularCost = type.cost_hourly * instanceCount * 730;
            const savings = regularCost - monthlyCost;
            
            document.getElementById('cost-estimate').textContent = `$${monthlyCost.toFixed(2)}`;
            
            if (preemptible && savings > 0) {
                document.getElementById('savings-info').textContent = `Saving $${savings.toFixed(2)} with preemptible VMs`;
            } else {
                document.getElementById('savings-info').textContent = 'Standard pricing';
            }
        }
        
        // Initialize world map
        function initWorldMap() {
            const mapContainer = document.getElementById('world-map');
            const tooltip = document.getElementById('map-tooltip');
            
            gcpRegions.forEach(region => {
                const marker = document.createElement('div');
                marker.className = 'map-marker available';
                
                // Convert lat/lon to approximate SVG coordinates (simplified)
                const x = ((region.lon + 180) / 360) * mapContainer.offsetWidth;
                const y = ((90 - region.lat) / 180) * mapContainer.offsetHeight;
                
                marker.style.left = `${x}px`;
                marker.style.top = `${y}px`;
                
                marker.addEventListener('mouseenter', (e) => {
                    tooltip.innerHTML = `
                        <strong>${region.name}</strong><br>
                        Region: ${region.id}<br>
                        Instances: 0
                    `;
                    tooltip.style.display = 'block';
                    tooltip.style.left = `${e.pageX + 10}px`;
                    tooltip.style.top = `${e.pageY - 10}px`;
                });
                
                marker.addEventListener('mouseleave', () => {
                    tooltip.style.display = 'none';
                });
                
                mapContainer.appendChild(marker);
            });
        }
        
        // Controllers management
        function renderControllers() {
            const tbody = document.getElementById('controllers-table');
            tbody.innerHTML = '';
            
            controllers.forEach(controller => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${controller.name}</td>
                    <td>${controller.host}</td>
                    <td>${controller.region}</td>
                    <td>${controller.provider.toUpperCase()}</td>
                    <td>
                        <span class="status-badge ${controller.is_active ? 'online' : 'offline'}">
                            <i class="fas fa-circle"></i>
                            ${controller.is_active ? 'Online' : 'Offline'}
                        </span>
                    </td>
                    <td>${controller.last_seen.toLocaleString()}</td>
                    <td>
                        <button class="btn btn-secondary" onclick="switchController(${controller.id})">
                            ${controller.is_active ? 'Active' : 'Activate'}
                        </button>
                        ${!controller.is_active ? `<button class="btn btn-danger" onclick="deleteController(${controller.id})">Delete</button>` : ''}
                    </td>
                `;
                tbody.appendChild(row);
            });
        }
        
        function switchController(id) {
            controllers.forEach(c => c.is_active = false);
            const controller = controllers.find(c => c.id === id);
            if (controller) {
                controller.is_active = true;
                updateControllerSelect();
                renderControllers();
                showNotification(`Switched to controller: ${controller.name}`);
            }
        }
        
        function deleteController(id) {
            if (confirm('Are you sure you want to delete this controller?')) {
                controllers = controllers.filter(c => c.id !== id);
                renderControllers();
                updateControllerSelect();
                showNotification('Controller deleted', 'warning');
            }
        }
        
        function updateControllerSelect() {
            const select = document.getElementById('controller-select');
            select.innerHTML = '';
            
            controllers.forEach(controller => {
                const option = document.createElement('option');
                option.value = controller.id;
                option.textContent = `${controller.name} (${controller.region}) ${controller.is_active ? 'âœ“' : ''}`;
                if (controller.is_active) option.selected = true;
                select.appendChild(option);
            });
        }
        
        // Fleet deployment
        function renderDeployments() {
            const container = document.getElementById('deployments-list');
            
            if (deployments.length === 0) {
                container.innerHTML = '<p style="color: var(--dashboard-text-muted);">No active deployments</p>';
                return;
            }
            
            container.innerHTML = deployments.map(deployment => `
                <div class="card" style="margin-bottom: var(--space-16);">
                    <h4>${deployment.name}</h4>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-8);">
                        <span class="status-badge ${deployment.status}">
                            <i class="fas fa-circle"></i>
                            ${deployment.status}
                        </span>
                        <span>$${deployment.cost_estimate}/month</span>
                    </div>
                    <div style="font-size: var(--font-size-sm); color: var(--dashboard-text-muted);">
                        ${deployment.count} Ã— ${deployment.instance_type} in ${deployment.regions.join(', ')}
                    </div>
                    ${deployment.status === 'deploying' ? `
                        <div class="progress-bar" style="margin-top: var(--space-8);">
                            <div class="progress-fill" style="width: ${deployment.progress || 0}%;"></div>
                        </div>
                        <div style="font-size: var(--font-size-xs); color: var(--dashboard-text-muted); margin-top: var(--space-4);">
                            ${deployment.progress || 0}% complete
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }
        
        // Instance management
        function renderInstances() {
            const tbody = document.getElementById('instances-table');
            
            if (instances.length === 0) {
                tbody.innerHTML = '<tr><td colspan="9" style="text-align: center; color: var(--dashboard-text-muted);">No instances running</td></tr>';
                return;
            }
            
            tbody.innerHTML = instances.map(instance => `
                <tr>
                    <td><input type="checkbox" class="instance-checkbox" value="${instance.id}"></td>
                    <td>${instance.name}</td>
                    <td>${instance.ip}</td>
                    <td>${instance.internal_ip}</td>
                    <td>${instance.region}</td>
                    <td>${instance.type}</td>
                    <td>
                        <span class="status-badge running">
                            <i class="fas fa-circle"></i>
                            ${instance.status}
                        </span>
                    </td>
                    <td>${instance.uptime}</td>
                    <td>
                        <button class="btn btn-danger" onclick="terminateInstance('${instance.id}')">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                </tr>
            `).join('');
        }
        
        function refreshInstances() {
            showNotification('Refreshing instances...');
            // Simulate API call
            setTimeout(() => {
                renderInstances();
                showNotification('Instances refreshed');
            }, 1000);
        }
        
        function terminateInstance(instanceId) {
            if (confirm('Are you sure you want to terminate this instance?')) {
                instances = instances.filter(i => i.id !== instanceId);
                renderInstances();
                updateStats();
                showNotification('Instance terminated', 'warning');
            }
        }
        
        // Scan management
        function renderScans() {
            const container = document.getElementById('active-scans');
            
            if (scans.length === 0) {
                container.innerHTML = '<p style="color: var(--dashboard-text-muted);">No active scans</p>';
                return;
            }
            
            container.innerHTML = scans.map(scan => `
                <div class="card" style="margin-bottom: var(--space-16);">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-8);">
                        <h4>${scan.module} Scan</h4>
                        <span class="status-badge ${scan.status}">
                            <i class="fas fa-circle"></i>
                            ${scan.status}
                        </span>
                    </div>
                    <div style="font-size: var(--font-size-sm); color: var(--dashboard-text-muted); margin-bottom: var(--space-8);">
                        Fleet: ${scan.fleet} | Targets: ${scan.targets} | Output: ${scan.output_file}
                    </div>
                    ${scan.status === 'running' ? `
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${scan.progress}%;"></div>
                        </div>
                        <div style="font-size: var(--font-size-xs); color: var(--dashboard-text-muted); margin-top: var(--space-4);">
                            ${scan.progress}% complete
                        </div>
                    ` : ''}
                    ${scan.status === 'completed' ? `
                        <button class="btn btn-success" onclick="downloadResults('${scan.id}')">
                            <i class="fas fa-download"></i> Download Results
                        </button>
                    ` : ''}
                </div>
            `).join('');
        }
        
        function downloadResults(scanId) {
            showNotification('Downloading scan results...');
            // Simulate download
            setTimeout(() => {
                showNotification('Results downloaded successfully');
            }, 1000);
        }
        
        // Terminal functionality
        function executeQuickCommand(command) {
            const input = document.getElementById('terminal-input');
            input.value = command;
            executeCommand();
        }
        
        function executeCommand() {
            const input = document.getElementById('terminal-input');
            const output = document.getElementById('terminal-output');
            const command = input.value.trim();
            
            if (!command) return;
            
            // Add command to output
            output.textContent += command + '\n';
            
            // Simulate command execution
            let response = '';
            if (command === 'axiom-ls') {
                response = instances.length > 0 
                    ? instances.map(i => `${i.name}\t${i.ip}\t${i.region}\t${i.status}`).join('\n')
                    : 'No instances found';
            } else if (command.startsWith('axiom-fleet')) {
                response = 'Fleet deployment initiated. Use axiom-ls to monitor progress.';
            } else if (command.startsWith('axiom-scan')) {
                response = 'Distributed scan started across fleet instances.';
            } else if (command === 'ps aux | grep axiom') {
                response = 'ubuntu   1234  0.1  0.5  123456  12345 ?  S  12:34  0:01 axiom-controller\nubuntu   5678  0.0  0.1   5432   1234 pts/0 S+ 12:35  0:00 grep axiom';
            } else {
                response = `Command executed: ${command}`;
            }
            
            output.textContent += response + '\n';
            output.textContent += 'ubuntu@axiom-controller:~$ ';
            
            input.value = '';
            output.scrollTop = output.scrollHeight;
        }
        
        // File management
        function renderUploadedFiles() {
            const container = document.getElementById('uploaded-files');
            
            if (uploadedFiles.length === 0) {
                container.innerHTML = '<p style="color: var(--dashboard-text-muted);">No files uploaded</p>';
                return;
            }
            
            container.innerHTML = uploadedFiles.map(file => `
                <div class="file-item">
                    <div class="file-info">
                        <div class="file-name">${file.name}</div>
                        <div class="file-meta">${file.size} KB â€¢ ${file.uploadDate}</div>
                    </div>
                    <button class="btn btn-danger" onclick="deleteFile('${file.id}')">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            `).join('');
        }
        
        function deleteFile(fileId) {
            if (confirm('Are you sure you want to delete this file?')) {
                uploadedFiles = uploadedFiles.filter(f => f.id !== fileId);
                renderUploadedFiles();
                showNotification('File deleted', 'warning');
            }
        }
        
        // Update statistics
        function updateStats() {
            document.getElementById('active-controllers-count').textContent = controllers.filter(c => c.is_active).length;
            document.getElementById('running-instances-count').textContent = instances.length;
            document.getElementById('active-scans-count').textContent = scans.filter(s => s.status === 'running').length;
            
            // Calculate total monthly cost
            let totalCost = 0;
            deployments.forEach(deployment => {
                if (deployment.status === 'running') {
                    totalCost += deployment.cost_estimate;
                }
            });
            document.getElementById('monthly-cost').textContent = `$${totalCost.toFixed(2)}`;
        }
        
        function updateFleetSelectors() {
            const selectors = ['scan-fleet', 'target-fleet'];
            const runningFleets = deployments.filter(d => d.status === 'running');
            
            selectors.forEach(selectorId => {
                const select = document.getElementById(selectorId);
                select.innerHTML = runningFleets.length > 0 
                    ? runningFleets.map(fleet => `<option value="${fleet.name}">${fleet.name} (${fleet.count} instances)</option>`).join('')
                    : '<option value="">No fleets available</option>';
            });
        }
        
        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize components
            initWorldMap();
            renderControllers();
            updateControllerSelect();
            renderDeployments();
            renderInstances();
            renderScans();
            renderUploadedFiles();
            updateStats();
            updateFleetSelectors();
            
            // Fleet deployment form
            document.getElementById('fleet-deploy-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const formData = {
                    name: document.getElementById('fleet-name').value,
                    count: parseInt(document.getElementById('instance-count').value),
                    regions: Array.from(document.getElementById('regions-select').selectedOptions).map(opt => opt.value),
                    instance_type: document.getElementById('instance-type').value,
                    preemptible: document.getElementById('preemptible').checked
                };
                
                const type = instanceTypes.find(t => t.id === formData.instance_type);
                const hourlyCost = formData.preemptible ? type.preemptible_cost : type.cost_hourly;
                const costEstimate = hourlyCost * formData.count * 730;
                
                const deployment = {
                    id: Date.now(),
                    ...formData,
                    status: 'deploying',
                    cost_estimate: costEstimate,
                    progress: 0,
                    created_at: new Date()
                };
                
                deployments.push(deployment);
                
                // Simulate deployment progress
                let progress = 0;
                const interval = setInterval(() => {
                    progress += Math.random() * 15;
                    deployment.progress = Math.min(progress, 100);
                    
                    if (progress >= 100) {
                        deployment.status = 'running';
                        deployment.progress = 100;
                        
                        // Generate mock instances
                        for (let i = 1; i <= formData.count; i++) {
                            const region = formData.regions[Math.floor(Math.random() * formData.regions.length)];
                            instances.push({
                                id: `${formData.name}-${i.toString().padStart(2, '0')}`,
                                name: `${formData.name}-${i.toString().padStart(2, '0')}`,
                                ip: `34.${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}`,
                                internal_ip: `10.132.0.${10 + i}`,
                                region: region,
                                type: formData.instance_type,
                                status: 'running',
                                uptime: '0m',
                                fleet: formData.name
                            });
                        }
                        
                        renderInstances();
                        updateFleetSelectors();
                        showNotification(`Fleet "${formData.name}" deployed successfully!`);
                        clearInterval(interval);
                    }
                    
                    renderDeployments();
                    updateStats();
                }, 500);
                
                renderDeployments();
                showNotification('Fleet deployment started...');
                
                // Reset form
                e.target.reset();
                document.getElementById('instance-count').value = 5;
                document.getElementById('preemptible').checked = true;
                calculateFleetCost();
            });
            
            // Add controller form
            document.getElementById('add-controller-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const newController = {
                    id: Date.now(),
                    name: document.getElementById('controller-name').value,
                    host: document.getElementById('controller-host').value,
                    internal_ip: document.getElementById('controller-internal-ip').value,
                    ssh_user: document.getElementById('controller-user').value,
                    ssh_key_path: document.getElementById('controller-key-path').value,
                    region: document.getElementById('controller-region').value,
                    provider: 'gcp',
                    is_active: false,
                    last_seen: new Date(),
                    created_at: new Date()
                };
                
                controllers.push(newController);
                renderControllers();
                updateControllerSelect();
                updateStats();
                
                showNotification(`Controller "${newController.name}" added successfully!`);
                closeModal('add-controller-modal');
                e.target.reset();
            });
            
            // Scan configuration form
            document.getElementById('scan-config-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const targets = document.getElementById('scan-targets').value.split('\n').filter(t => t.trim());
                
                if (targets.length === 0) {
                    showNotification('Please enter at least one target', 'error');
                    return;
                }
                
                const fleet = document.getElementById('scan-fleet').value;
                if (!fleet) {
                    showNotification('Please select a fleet', 'error');
                    return;
                }
                
                const scan = {
                    id: Date.now(),
                    fleet: fleet,
                    module: document.getElementById('scan-module').value,
                    targets: `${targets.length} targets`,
                    output_file: document.getElementById('output-file').value,
                    status: 'running',
                    progress: 0,
                    rate_limit: parseInt(document.getElementById('rate-limit').value),
                    started_at: new Date()
                };
                
                scans.push(scan);
                
                // Simulate scan progress
                let progress = 0;
                const interval = setInterval(() => {
                    progress += Math.random() * 8;
                    scan.progress = Math.min(progress, 100);
                    
                    if (progress >= 100) {
                        scan.status = 'completed';
                        scan.progress = 100;
                        scan.completed_at = new Date();
                        showNotification(`Scan completed: ${scan.module}`);
                        clearInterval(interval);
                    }
                    
                    renderScans();
                    updateStats();
                }, 1000);
                
                renderScans();
                showNotification('Distributed scan started!');
                
                // Reset form
                document.getElementById('scan-targets').value = '';
            });
            
            // Terminal input
            document.getElementById('terminal-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    executeCommand();
                }
            });
            
            // File upload
            document.getElementById('file-input').addEventListener('change', function(e) {
                const files = Array.from(e.target.files);
                
                files.forEach(file => {
                    const uploadedFile = {
                        id: Date.now() + Math.random(),
                        name: file.name,
                        size: Math.round(file.size / 1024),
                        uploadDate: new Date().toLocaleString(),
                        originalFile: file
                    };
                    
                    uploadedFiles.push(uploadedFile);
                });
                
                renderUploadedFiles();
                showNotification(`${files.length} file(s) uploaded successfully!`);
                
                e.target.value = ''; // Clear file input
            });
            
            // Update cost estimate when fleet parameters change
            ['instance-count', 'instance-type', 'preemptible'].forEach(id => {
                document.getElementById(id).addEventListener('change', calculateFleetCost);
                document.getElementById(id).addEventListener('input', calculateFleetCost);
            });
            
            // Update display values for sliders
            document.getElementById('instance-count').addEventListener('input', function() {
                document.getElementById('instance-count-value').textContent = this.value;
            });
            
            document.getElementById('rate-limit').addEventListener('input', function() {
                document.getElementById('rate-limit-value').textContent = this.value;
            });
            
            // Initialize cost calculation
            calculateFleetCost();
            
            // Simulate periodic updates
            setInterval(() => {
                // Update controller last_seen
                controllers.forEach(controller => {
                    if (controller.is_active) {
                        controller.last_seen = new Date();
                    }
                });
                
                // Update instance uptime
                instances.forEach(instance => {
                    const uptimeMs = Date.now() - (instance.startTime || Date.now() - Math.random() * 3600000);
                    const hours = Math.floor(uptimeMs / 3600000);
                    const minutes = Math.floor((uptimeMs % 3600000) / 60000);
                    instance.uptime = hours > 0 ? `${hours}h ${minutes}m` : `${minutes}m`;
                });
                
                // Re-render if on relevant tabs
                const activeTab = document.querySelector('.tab-content.active').id;
                if (activeTab === 'controllers') renderControllers();
                if (activeTab === 'instances') renderInstances();
            }, 30000); // Update every 30 seconds
        });
    </script>
</body>
</html>